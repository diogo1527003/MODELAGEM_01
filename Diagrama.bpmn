<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_1xqsfst" targetNamespace="http://bpmn.io/schema/bpmn" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <bpmn:collaboration id="Collaboration_12klpvd">
    <bpmn:participant id="Participant_1745pne" name="Usuario" processRef="Process_1ekqrbm" />
    <bpmn:participant id="Participant_1uzij5o" name="Sistema" processRef="Process_0ous2hz" />
    <bpmn:participant id="Participant_077kiqx" name="Banco de Dados" processRef="Process_1vz901m" />
    <bpmn:participant id="Participant_17b7x3a" name="Usuario" processRef="Process_0o32qqc" />
    <bpmn:participant id="Participant_1c4i1g1" name="Sistema" processRef="Process_01p1vdx" />
    <bpmn:participant id="Participant_0fhg07v" name="Banco de dados" processRef="Process_0yx8kqd" />
    <bpmn:messageFlow id="Flow_060onyx" sourceRef="Activity_0spbrbt" targetRef="Event_04aa5ql" />
    <bpmn:messageFlow id="Flow_145la4v" sourceRef="Activity_04xtn2f" targetRef="Event_04aa5ql" />
    <bpmn:messageFlow id="Flow_1iocqsw" sourceRef="Activity_0zhvigq" targetRef="Activity_1l4e6qk" />
    <bpmn:messageFlow id="Flow_1anyodl" sourceRef="Activity_1x53mjn" targetRef="Activity_01ua649" />
  </bpmn:collaboration>
  <bpmn:process id="Process_1ekqrbm" isExecutable="false">
    <bpmn:startEvent id="Event_04aa5ql" name="Gerar QRCODE" />
  </bpmn:process>
  <bpmn:process id="Process_0ous2hz">
    <bpmn:task id="Activity_0spbrbt" name="Chamar API Asaas" />
    <bpmn:task id="Activity_1g9pk14" name="Atualizar saldo do Banco de Dados">
      <bpmn:incoming>Flow_1xtyxct</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1ejxx9t">
        <bpmn:targetRef>DataStoreReference_0uopzxm</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:subProcess id="Activity_04xtn2f" name="Aguardar Notificação de Pagamento (Webhook)">
      <bpmn:outgoing>Flow_1xtyxct</bpmn:outgoing>
      <bpmn:startEvent id="Event_1hdyfd5" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_1xtyxct" sourceRef="Activity_04xtn2f" targetRef="Activity_1g9pk14" />
  </bpmn:process>
  <bpmn:process id="Process_1vz901m">
    <bpmn:dataStoreReference id="DataStoreReference_0uopzxm" name="Saldo Atualizado" />
  </bpmn:process>
  <bpmn:process id="Process_0o32qqc">
    <bpmn:startEvent id="Event_02di88u" name="Usuario solicita transferencia">
      <bpmn:outgoing>Flow_0k4u7q1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="Activity_1l4e6qk" name="Informar valor e confirmar">
      <bpmn:incoming>Flow_0k4u7q1</bpmn:incoming>
    </bpmn:task>
    <bpmn:sequenceFlow id="Flow_0k4u7q1" sourceRef="Event_02di88u" targetRef="Activity_1l4e6qk" />
  </bpmn:process>
  <bpmn:process id="Process_01p1vdx">
    <bpmn:task id="Activity_0zhvigq" name="Consultar saldo no banco de dados">
      <bpmn:outgoing>Flow_0njljqp</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="Gateway_105x0bu" name="Seu saldo e suficiente?">
      <bpmn:incoming>Flow_0njljqp</bpmn:incoming>
      <bpmn:outgoing>Flow_1etc7r6</bpmn:outgoing>
      <bpmn:outgoing>Flow_1hnkkws</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="Activity_01osp6r" name="Notificar usuario sobre saldo insuficiente">
      <bpmn:incoming>Flow_1hnkkws</bpmn:incoming>
      <bpmn:incoming>Flow_1ow2xkz</bpmn:incoming>
    </bpmn:task>
    <bpmn:startEvent id="Event_0hh77he" name="Transação encerrada">
      <bpmn:outgoing>Flow_1ow2xkz</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:subProcess id="Activity_01ua649" name="Chamar API para Executar Transferência">
      <bpmn:incoming>Flow_1etc7r6</bpmn:incoming>
      <bpmn:startEvent id="Event_10iq0t7" />
    </bpmn:subProcess>
    <bpmn:sequenceFlow id="Flow_0njljqp" sourceRef="Activity_0zhvigq" targetRef="Gateway_105x0bu" />
    <bpmn:sequenceFlow id="Flow_1etc7r6" name="Sim" sourceRef="Gateway_105x0bu" targetRef="Activity_01ua649" />
    <bpmn:sequenceFlow id="Flow_1hnkkws" name="Nao" sourceRef="Gateway_105x0bu" targetRef="Activity_01osp6r" />
    <bpmn:sequenceFlow id="Flow_1ow2xkz" sourceRef="Event_0hh77he" targetRef="Activity_01osp6r" />
  </bpmn:process>
  <bpmn:process id="Process_0yx8kqd">
    <bpmn:task id="Activity_1x53mjn" name="Registrar Transação de Saída no BD">
      <bpmn:incoming>Flow_082j37s</bpmn:incoming>
    </bpmn:task>
    <bpmn:task id="Activity_1bm3zr2" name="Calcular renteção de 7%">
      <bpmn:incoming>Flow_1otoug9</bpmn:incoming>
      <bpmn:outgoing>Flow_082j37s</bpmn:outgoing>
    </bpmn:task>
    <bpmn:startEvent id="Event_1vaish8" name="Transferencia finalizada">
      <bpmn:outgoing>Flow_1otoug9</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_082j37s" sourceRef="Activity_1bm3zr2" targetRef="Activity_1x53mjn" />
    <bpmn:sequenceFlow id="Flow_1otoug9" sourceRef="Event_1vaish8" targetRef="Activity_1bm3zr2" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_12klpvd">
      <bpmndi:BPMNShape id="Participant_1745pne_di" bpmnElement="Participant_1745pne" isHorizontal="true">
        <dc:Bounds x="156" y="62" width="704" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_04aa5ql_di" bpmnElement="Event_04aa5ql">
        <dc:Bounds x="212" y="92" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="189" y="68" width="81" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_1uzij5o_di" bpmnElement="Participant_1uzij5o" isHorizontal="true">
        <dc:Bounds x="156" y="310" width="704" height="330" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0spbrbt_di" bpmnElement="Activity_0spbrbt">
        <dc:Bounds x="200" y="360" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1g9pk14_di" bpmnElement="Activity_1g9pk14">
        <dc:Bounds x="630" y="379" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04xtn2f_di" bpmnElement="Activity_04xtn2f" isExpanded="true">
        <dc:Bounds x="380" y="350" width="160" height="138" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1hdyfd5_di" bpmnElement="Event_1hdyfd5">
        <dc:Bounds x="442" y="422" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1xtyxct_di" bpmnElement="Flow_1xtyxct">
        <di:waypoint x="540" y="419" />
        <di:waypoint x="630" y="419" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_077kiqx_di" bpmnElement="Participant_077kiqx" isHorizontal="true">
        <dc:Bounds x="156" y="630" width="704" height="230" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataStoreReference_0uopzxm_di" bpmnElement="DataStoreReference_0uopzxm">
        <dc:Bounds x="655" y="685" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="639" y="742" width="82" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_17b7x3a_di" bpmnElement="Participant_17b7x3a" isHorizontal="true">
        <dc:Bounds x="960" y="62" width="600" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_02di88u_di" bpmnElement="Event_02di88u">
        <dc:Bounds x="1042" y="152" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1023" y="195" width="75" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1l4e6qk_di" bpmnElement="Activity_1l4e6qk">
        <dc:Bounds x="1220" y="130" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0k4u7q1_di" bpmnElement="Flow_0k4u7q1">
        <di:waypoint x="1078" y="170" />
        <di:waypoint x="1220" y="170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1c4i1g1_di" bpmnElement="Participant_1c4i1g1" isHorizontal="true">
        <dc:Bounds x="960" y="310" width="600" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0zhvigq_di" bpmnElement="Activity_0zhvigq">
        <dc:Bounds x="1220" y="360" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_105x0bu_di" bpmnElement="Gateway_105x0bu" isMarkerVisible="true">
        <dc:Bounds x="1245" y="465" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1241" y="522" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_01osp6r_di" bpmnElement="Activity_01osp6r">
        <dc:Bounds x="1030" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0hh77he_di" bpmnElement="Event_0hh77he">
        <dc:Bounds x="1062" y="352" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1054" y="314.5" width="51" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_01ua649_di" bpmnElement="Activity_01ua649" isExpanded="true">
        <dc:Bounds x="1350" y="426" width="160" height="128" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_10iq0t7_di" bpmnElement="Event_10iq0t7">
        <dc:Bounds x="1412" y="498" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0njljqp_di" bpmnElement="Flow_0njljqp">
        <di:waypoint x="1270" y="440" />
        <di:waypoint x="1270" y="465" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1etc7r6_di" bpmnElement="Flow_1etc7r6">
        <di:waypoint x="1295" y="490" />
        <di:waypoint x="1350" y="490" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1313" y="472" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hnkkws_di" bpmnElement="Flow_1hnkkws">
        <di:waypoint x="1245" y="490" />
        <di:waypoint x="1130" y="490" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1177" y="472" width="21" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ow2xkz_di" bpmnElement="Flow_1ow2xkz">
        <di:waypoint x="1080" y="388" />
        <di:waypoint x="1080" y="450" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0fhg07v_di" bpmnElement="Participant_0fhg07v" isHorizontal="true">
        <dc:Bounds x="960" y="560" width="600" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1x53mjn_di" bpmnElement="Activity_1x53mjn">
        <dc:Bounds x="1380" y="620" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1bm3zr2_di" bpmnElement="Activity_1bm3zr2">
        <dc:Bounds x="1250" y="620" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1vaish8_di" bpmnElement="Event_1vaish8">
        <dc:Bounds x="1182" y="642" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1167" y="685" width="66" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_082j37s_di" bpmnElement="Flow_082j37s">
        <di:waypoint x="1350" y="660" />
        <di:waypoint x="1380" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1otoug9_di" bpmnElement="Flow_1otoug9">
        <di:waypoint x="1218" y="660" />
        <di:waypoint x="1250" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_060onyx_di" bpmnElement="Flow_060onyx">
        <di:waypoint x="230" y="360" />
        <di:waypoint x="230" y="128" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_145la4v_di" bpmnElement="Flow_145la4v">
        <di:waypoint x="460" y="350" />
        <di:waypoint x="460" y="239" />
        <di:waypoint x="230" y="239" />
        <di:waypoint x="230" y="128" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1ejxx9t_di" bpmnElement="DataOutputAssociation_1ejxx9t">
        <di:waypoint x="680" y="459" />
        <di:waypoint x="680" y="685" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1iocqsw_di" bpmnElement="Flow_1iocqsw">
        <di:waypoint x="1270" y="360" />
        <di:waypoint x="1270" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1anyodl_di" bpmnElement="Flow_1anyodl">
        <di:waypoint x="1430" y="620" />
        <di:waypoint x="1430" y="554" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
